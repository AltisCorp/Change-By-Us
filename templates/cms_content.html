{% extends "./partials/base.html" %}

{% block title %}
Change by Us - CMS Content
{% endblock title %}

{% block continent %}

<div class='continent cms cms-content'>

	<div class='headlands clearfix'>
		<ul class="tabs">
			<li class="tab featured-projects"><a href="#admin-content,featuredprojects">Featured Projects</a></li>
			<li class="tab warning-list"><a href="#admin-content,warninglist">Warning List</a></li>
			<li class="tab pending-resources"><a href="#admin-content,pendingresources">Pending Resources</a></li>
			<li class="tab metrics"><a href="#admin-content,sitemetrics">Metrics</a></li>
		</ul>
	</div><!-- end .headlands -->

	<div class='midlands merlin clearfix'>
		<div id="featured-projects" class="step view">
			<div class="top-tier clearfix">
				<div class="west">
					<h2>Featured Projects are displayed on the board located on the homepage of the site.</h2>
				</div>
				<div class="east">
					<p><strong>Note:</strong> only five projects can be featured on the homepage at a time. To add a different project, you can <a href="/search?terms=#projects">find some projects to feature</a>.</p>
				</div>
			</div>
			<div class="main-tier">
				{% if d.template_data.featured_projects.data|length > 0 %}
					<table class="featured-projects-table">
						<tbody>
							{% for project in d.template_data.featured_projects.data %}
								<tr class="{% if loop.index is odd %}alt{% endif %}">
									<th class="featured-project-header" scope="row">
										<h3 class="serif"><a href="/project/{{ project.project_id }}">{{ project.title }}</a></h3>
									</th>
									<td class="info-breakdown">
										<ul>
											<li><span class="counter">{{ project.num_members }}</span> Members</li>
											<li><span class="counter">{{ project.num_ideas }}</span> Ideas</li>
											<li><span class="counter">{{ project.num_resources }}</span> Resources</li>
											<li><span class="counter">{{ project.num_endorsements }}</span> Supporters</li>
										</ul>
									</td>
									<td class="info-description serif">
										<p>{{ project.description }}</p>
									</td>
									<td class="info-meta">
										Featured since <br /><strong>{{ project.featured_datetime }}</strong><br />by <strong><a href="/useraccount/{{ project.owner.u_id }}">{{ project.owner.name }}</a></strong>
									</td>
									<td class="control-delete">
										<a href="#deleteProject,{{ project.project_id }}" class="delete"><span>Delete</span></a>
									</td>
								</tr>
							{% endfor %}
						</tbody>
					</table>
				{% else %}
					<div class="empty-state-box big">
						<a class="close" href="#"><span>Close</span></a>
						<p>There are no Featured Projects yet.</p>
					</div>
				{% endif %}
			</div>
		</div>
		
		
		<div id="warning-list" class="step view" style="display:none">
			<div class="west sidebar">
				<div class="box flagged-content-filters">
					<div class="hd">
						<h2>Flagged Content</h2>
					</div>
					<div class="bd">
						<!-- <a href="#warning-content,all" class="sidebar-item all active"><span>All</span></a> -->
						<a href="#warning-content,ideas" class="sidebar-item ideas"><span>Ideas</span></a>
						<a href="#warning-content,projects" class="sidebar-item projects"><span>Projects</span></a>
						<a href="#warning-content,project-posts" class="sidebar-item project-posts"><span>Project Posts</span></a>
						<a href="#warning-content,project-goals" class="sidebar-item project-goals"><span>Project Goals</span></a>
						<a href="#warning-content,links" class="sidebar-item links"><span>Links</span></a>
					</div>
					<div class="ft">
						<p>Content is flagged according to the <q>Graylist</q> of questionable language.</p><br />
						<p>View and Edit the Graylist under<br />Admin Settings &rarr; Blacklist</p>
					</div>
				</div>
			</div>
			<div class="east">
				
				
				<!-- <div class="box">
					<div class="hd clearfix">
						<div class="pagination-controls">
							<span class="control">
								<a class="prev" href="#"><span class="sm-arrow-back light"></span><span>Previous</span></a>
								<a class="next" href="#"><span>Next</span><span class="sm-arrow-forward light"></span></a>
							</span>
						</div>
					</div>
					<div class="bd">
						<ul class="items warning-list-stack">
							<li class="item-box ideas all">
								<div class="hd">
									<div class="controls">
										<a href="#" class="control-ok">OK</a>
										<a href="#" class="control-delete">Delete</a>
									</div>
									<div class="info">
										<span class="name">Lorem Lastname</span> in
										<span class="title serif">Project Name</span>
										<span class="time"><strong>12:43pm</strong> on <strong>04.03.2011</strong></span>
									</div>
								</div>
								<div class="bd serif">
									<blockquote>
										<p>Idea. Iusto dolore eorum claritatem exerci consuetudium. Qui est processus lectores modo humanitatis. Aliquam non dolor eodem lectorum duis.</p>
									</blockquote>
								</div>
							</li>
						</ul>
					</div> -->
					
				<div class="box active-admins">
					<div class="hd clearfix">
						<div class="pagination-controls">
							<span class="control">
								<a class="prev warning-carousel-prev" href="#"><span class="sm-arrow-back light"></span><span>Previous</span></a>
								<a class="next warning-carousel-next" href="#"><span>Next</span><span class="sm-arrow-forward light"></span></a>
							</span>
						</div>
					</div>
					<div class="bd">
						<div class="carousel warning">
							<div class="scrollable">
								<ul class="items">
									
									<li class='flagged-content-carousel-item clearfix spinner-message'>
										<ul class="items warning-list-stack">
											<li><p>Loading...</p></li>
										</ul>
									</li>
									
								</ul>
							</div>
						</div>
					</div>
					<div class="ft">
						<div class="pagination-controls">
							<span class="control">
								<a class="prev warning-carousel-prev" href="#"><span class="sm-arrow-back light"></span><span>Previous</span></a>
								<a class="next warning-carousel-next" href="#"><span>Next</span><span class="sm-arrow-forward light"></span></a>
							</span>
						</div>
					</div>
					
				</div>
			</div>
		</div>
		
		
		<div id="pending-resources" class="step view" style="display:none">
			<div class="west">
				<div class="box">
					<div class="bd">
						<p>These resources have been submitted to the site and await approval.</p><br />
						<p>Review and approve them to include them on the site.</p>
					</div>
				</div>
			</div>
			<div class="east">
				<div class="hd clearfix">
					<div class="pagination-controls">
						<span class="control">
							<a class="prev" href="#"><span class="sm-arrow-back light"></span><span>Previous</span></a>
							<a class="next" href="#"><span>Next</span><span class="sm-arrow-forward light"></span></a>
						</span>
					</div>
				</div>
				<div class="bd">
					<ul class="items pending-resources-stack">
						<li class="item-box clearfix">
							<div class="hd">
								<div class="controls">
									<a href="#" class="control-approve">Approve</a>
									<a href="#" class="control-delete">Delete</a>
								</div>
							</div>
							<div class="bd">
								<div class="west">
									<h3 class="serif">Resource Name</h3>
									<p class="serif"><a href="">www.resourcewebsite.org</a><br/> Given Location</p>
									<div class="tags">
										<h4>Tags</h4>
										<span class="serif">lorem, ipsum, sit, eros</span>
									</div>
								</div>
								<div class="mission">
									<h4>Mission</h4>
									<span class="serif"><p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper. Aenean ultricies mi vitae est. Mauris placerat eleifend leo. Quisque sit amet est et sapien ullamcorper pharetra. Vestibulum erat wisi, condimentum sed, commodo vitae, ornare sit amet, wisi. Aenean fermentum, elit eget tincidunt condimentum, eros ipsum rutrum orci.</p></span>
								</div>
							</div>
						</li>
					</ul>
				</div>
			</div>
		</div>
		
		
		<div id="metrics" class="step view" style="display:none">
			<div class="metrics-header clearfix">
				<div class="west">
					<h2>Overall <span class="unbold">Metrics</span></h2>
				</div>
				<div class="overall-stats">
					<ul class="breakdown clearfix">
						<li>
							<span class="counter n-users">&nbsp;</span>
							Users
						</li>
						<li>
							<span class="counter n-projects">&nbsp;</span>
							Projects
						</li>
						<li>
							<span class="counter n-ideas">&nbsp;</span>
							Ideas
						</li>
						<li>
							<span class="counter n-resources">&nbsp;</span>
							Resources
						</li>
					</ul>
					<div class="averages">
						Average of <span class="counter avg-project-users">&nbsp;</span> members per project <span class="separator">|</span>
						Average of <span class="counter avg-daily-ideas">&nbsp;</span> ideas submitted per day
					</div>
				</div>
			</div>
			<div class="box metrics-section metrics-keywords">
				<div class="hd clearfix">
					<h2><span class="unbold">Top</span> Keywords<span class="counter total-tags">&nbsp;</span></h2>
					<a href="/admin/csv/metrics/keywords" target="_blank" class="download-button download-csv rounded-button small">Download (.csv)</a>
				</div>
				<div class="bd">
					<ul class="keyword-list clearfix"></ul>
				</div>
			</div>
			<div class="box metrics-section metrics-projects">
				<div class="hd clearfix">
					<h2>Project <span class="unbold">Metrics</span></h2>
					<a href="/admin/csv/metrics/project" target="_blank" class="download-button download-csv rounded-button small">Download (.csv)</a>
				</div>
				<div class="bd">
					<p>Contains the number of: <strong>Members</strong>, <strong>Ideas</strong>, <strong>Resources</strong>, <strong>Supporters</strong> and <strong>tags</strong> for all projects. (organized alphabetically by name)</p>
				</div>
			</div>
			<div class="box metrics-section metrics-user">
				<div class="hd clearfix">
					<h2>User <span class="unbold">Metrics</span></h2>
					<a href="/admin/csv/metrics/user" target="_blank" class="download-button download-csv rounded-button small">Download (.csv)</a>
				</div>
				<div class="bd">
					<p>Contains: <strong>name</strong>, <strong>email</strong>, <strong>date joined</strong>, <strong>projects joined</strong>, and <strong>date</strong> <br />for each user (organized alphabetically by user name)</p>
				</div>
			</div>
			<div class="box metrics-section metrics-location">
				<div class="hd clearfix">
					<h2>Location <span class="unbold">Metrics</span></h2>
					<a href="/admin/csv/metrics/location" target="_blank" class="download-button download-csv rounded-button small">Download (.csv)</a>
				</div>
				<div class="bd">
					<p>Contains the number of: <strong>Projects</strong>, <strong>Ideas</strong>, and <strong>Resources</strong> <br />for each neighborhood. (organized by borough)</p>
				</div>
			</div>
			<div class="box metrics-section metrics-feedback">
				<div class="hd clearfix">
					<h2>Feedback</h2>
					<a href="/admin/csv/site/feedback" target="_blank" class="download-button download-csv rounded-button small">Download (.csv)</a>
				</div>
				<div class="bd">
					<p>Contains <strong>User Feedback</strong></p>
				</div>
			</div>
		</div>
	</div>

	<div class='foothills'>

	</div>
	
	<li class="item-box ideas all template-content" >
		<div class="hd">
			<div class="controls">
				<a href="#" class="control-ok">OK</a>
				<a href="#" class="control-delete">Delete</a>
			</div>
			<div class="info">
				<span class="name"></span> in
				<span class="title serif"></span>
				<!-- <span class="time"><strong>12:43pm</strong> on <strong>04.03.2011</strong></span> -->
				<span class="time"></span>
			</div>
		</div>
		<div class="bd serif">
			<blockquote>
				<p class='description'></p>
			</blockquote>
		</div>
	</li>
	
	<div class="template-content modal-content confirm-delete content-delete">
		<div class="step">
			<h2><strong>Delete</strong> this <span class='item-type-name'></span>?</h2>
			<div>
				<p>You are about to delete this <span class='item-type-name'></span> from the system permanently! <br/>Are you sure?</p>
			</div>
			<div class="actions">
				<a class="submit rounded-button" href="#">Yes, Delete <span class='item-type-name'></span></a>
				<a class="cancel" href="#">No, keep it.</a>
			</div>
		</div>
		<a class='close' href="#"><span>close</span></a>
	</div>
	
	<div class="template-content modal-content confirm-delete unfeature-project">
		<div class="step">
			<h2><strong>Remove</strong> this Project?</h2>
			<div>
				<p>You are about to remove this Project from the Featured Projects list! Are you sure?</p>
			</div>
			<div class="actions">
				<a class="submit rounded-button" href="#">Yes, Remove Project</a>
				<a class="cancel" href="#">No, keep it.</a>
			</div>
		</div>
		<a class='close' href="#"><span>close</span></a>
	</div>

</div><!-- end .continent.cms-content -->
{% endblock continent %}




{% block page_js %}
<script type="text/javascript">
	app_page.features.push(function(app){
		tc.util.log('Give A Minute: Content');
		
		app.components.merlin = new tc.merlin(app,{
			name:'admin-content',
			dom:tc.jQ('.merlin'),
			first_step:'featuredprojects',
			steps:{
				'featuredprojects':{
					selector:'#featured-projects',
					init:function(merlin,dom){
						tc.jQ('.headlands .tabs li.featured-projects').addClass('active').siblings().removeClass('active');
						dom.find(".featured-projects-table a.delete").bind("click", {
							merlin:merlin,
							dom:dom
						},
						function(e, d) {
							var row;
							row = tc.jQ(e.target).parents("tr").eq(0);
							e.preventDefault();
							e.data.merlin.app.components.modal.show({
								app: e.data.merlin.app,
								source_element: tc.jQ('.template-content.unfeature-project'),
								submit: function() {
									tc.jQ.ajax({
										type:'POST',
										url:'/admin/project/feature/delete',
										data:{
											project_id: e.target.href.split(",")[1],
										},
										context: e.data.merlin,
										dataType:'text',
										success:function(data,ts,xhr){
											var table, ordinal;
											if(data == '-1'){
												return false;
											}
											ordinal = data;
											table = row.parent().parent();
											row.remove();
											table.find("tbody").find("tr").removeClass("alt").filter(":even").addClass("alt");
										}
									});
								}
							})
						});
					}
				},
				'warninglist':{
					selector:'#warning-list',
					init:function(merlin,dom){
						tc.jQ('.headlands .tabs li.warning-list').addClass('active').siblings().removeClass('active');
						build_carousel(merlin.app);
						window.location.hash = 'warning-content,ideas';
					}
				},
				'pendingresources':{
					selector:'#pending-resources',
					init:function(merlin,dom){
						tc.jQ('.headlands .tabs li.pending-resources').addClass('active').siblings().removeClass('active');
					}
				},
				'sitemetrics':{
					selector:'#metrics',
					init:function(merlin,dom){
						tc.jQ('.headlands .tabs li.metrics').addClass('active').siblings().removeClass('active');
						tc.jQ.ajax({
							type:"GET",
							url:"/admin/metrics",
							context:merlin,
							dataType:"text",
							success: function(data, ts, xhr) {
								var d, i;
								try{
									d = tc.jQ.parseJSON(data);
								}catch(e){
									tc.util.dump(e);
									return;
								}
								tc.util.dump(d);
								tc.util.dump(this.current_step.dom.find('.counter.n_users'));
								this.current_step.dom.find('.counter.n-users').text(d.overall.num_users);
								this.current_step.dom.find('.counter.n-projects').text(d.overall.num_projects);
								this.current_step.dom.find('.counter.n-ideas').text(d.overall.num_ideas);
								this.current_step.dom.find('.counter.n-resources').text(d.overall.num_resources);
								
								this.current_step.dom.find('.counter.avg-project-users').text(d.overall.num_avg_users_per_project);
								this.current_step.dom.find('.counter.avg-daily-ideas').text(d.overall.num_avg_ideas_per_day);
								
								this.current_step.dom.find('.counter.total-tags').text(d.tags.num_total+' TOTAL');
								
								this.current_step.dom.find('.keyword-list').children().remove();
								for(i in d.tags.top){
									this.current_step.dom.find('.keyword-list').append('<li>\
										<span class="stats">\
											<span><span class="counter">'+d.tags.top[i].num_projects+'</span> Projects</span>\
											<span><span class="counter">'+d.tags.top[i].num_resources+'</span> Resources</span>\
										</span>\
										<h3 title="'+d.tags.top[i].word+'"><span class="serif">'+d.tags.top[i].word+'</span> <span class="counter">'+(d.tags.top[i].num_projects+d.tags.top[i].num_resources)+'</span></h3>\
									</li>');
								}
								
							}
						});
					}
				}
			}
		});
		
		app.components.warning_content_merlin = new tc.merlin(app,{
			name:'warning-content',
			steps:{
				//'all':{
				//	init:function(merlin,dom){
				//		tc.jQ('.sidebar-item.all').addClass('active').siblings().removeClass('active');
				//		if(merlin.app.components.warning_pagination){
				//			merlin.app.components.warning_pagination.setContentType('all');
				//		}
				//	}
				//},
				'ideas':{
					init:function(merlin,dom){
						tc.jQ('.sidebar-item.ideas').addClass('active').siblings().removeClass('active');
						if(merlin.app.components.warning_pagination){
							merlin.app.components.warning_pagination.setContentType('idea');
						};
					}
				},
				'projects':{
					init:function(merlin,dom){
						tc.jQ('.sidebar-item.projects').addClass('active').siblings().removeClass('active');
						if(merlin.app.components.warning_pagination){
							merlin.app.components.warning_pagination.setContentType('project');
						}
					}
				},
				'project-posts':{
					init:function(merlin,dom){
						tc.jQ('.sidebar-item.project-posts').addClass('active').siblings().removeClass('active');
						if(merlin.app.components.warning_pagination){
							merlin.app.components.warning_pagination.setContentType('message');
						}
					}
				},
				'project-goals':{
					init:function(merlin,dom){
						tc.jQ('.sidebar-item.project-goals').addClass('active').siblings().removeClass('active');
						if(merlin.app.components.warning_pagination){
							merlin.app.components.warning_pagination.setContentType('goal');
						}
					}
				},
				'links':{
					init:function(merlin,dom){
						tc.jQ('.sidebar-item.links').addClass('active').siblings().removeClass('active');
						if(merlin.app.components.warning_pagination){
							merlin.app.components.warning_pagination.setContentType('link');
						}
					}
				}
			}
		});
		
		app.components.content_functions = {
			mark_content_ok:function(e){
				var type;
				e.preventDefault();
				type = e.target.hash.split('-')[1].split(',')[0];
				
				switch(type){
					case 'idea':
						data = {
							idea_id:e.target.hash.split(',')[1]
						}
						break;
					case 'project':
						data = {
							project_id:e.target.hash.split(',')[1]
						}
						break;
					case 'goal':
						data = {
							goal_id:e.target.hash.split(',')[1]
						}
						break;
					case 'message':
						data = {
							message_id:e.target.hash.split(',')[1]
						}
						break;
					case 'link':
						data = {
							link_id:e.target.hash.split(',')[1]
						}
						break;
				}
				
				tc.jQ.ajax({
					type:"POST",
					url:"/admin/"+type+"/approve",
					data:data,
					context:e,
					dataType:"text",
					success: function(data, ts, xhr) {
						if(data == 'False'){
							return;
						}
						tc.jQ(this.target).parents('.item-box').addClass('approved').slideUp();
						this.data.app.components.warning_pagination.data.offset--;
					}
				});
				
			},
			delete_content:function(e){
				var type, modal_values, data;
				e.preventDefault();
				type = e.target.hash.split('-')[1].split(',')[0];
				
				switch(type){
					case 'idea':
						data = {
							idea_id:e.target.hash.split(',')[1]
						}
						modal_values = {
							item_type_name:'Idea'
						}
						break;
					case 'project':
						data = {
							project_id:e.target.hash.split(',')[1]
						}
						modal_values = {
							item_type_name:'Project'
						}
						break;
					case 'goal':
						data = {
							goal_id:e.target.hash.split(',')[1]
						}
						modal_values = {
							item_type_name:'Goal'
						}
						break;
					case 'message':
						data = {
							message_id:e.target.hash.split(',')[1]
						}
						modal_values = {
							item_type_name:'Message'
						}
						break;
					case 'link':
						data = {
							link_id:e.target.hash.split(',')[1]
						}
						modal_values = {
							item_type_name:'Link'
						}
						break;
				}
				
				e.data.app.components.modal.show({
					app:e.data.app,
					source_element:tc.jQ('.modal-content.content-delete'),
					init:function(modal,callback){
						modal.options.element.find('.item-type-name').text(modal_values.item_type_name);
						if(tc.jQ.isFunction(callback)){
							callback(modal);
						}
					},
					submit:function(modal){
						tc.jQ.ajax({
							type:"POST",
							url:"/admin/"+type+"/delete",
							data:data,
							context:e,
							dataType:"text",
							success: function(data, ts, xhr) {
								if(data == 'False'){
									return;
								}
								tc.jQ(this.target).parents('.item-box').addClass('deleted').slideUp();
								this.data.app.components.warning_pagination.data.offset--;
							}
						});
					}
				});
				
				
				
			}
		};
		
		
		function build_carousel(app){
			var data, fn;
			
			if(app.components.warning_pagination){
				return;
			}
			
			app.components.warning_pagination = new tc.carousel({
				element: tc.jQ(".warning.carousel"),
				next_button: tc.jQ('.warning-carousel-next'),
				prev_button: tc.jQ('.warning-carousel-prev'),
				scrollable: {
					items: ".items",
					speed: 300,
					circular: false
				}
			});
			
			app.components.warning_pagination.data = {
				current_section:null,
				current_page:null,
				n_to_fetch: 10,
				offset:0,
				temp_item_source:tc.jQ('.template-content.item-box')
			};
			
			app.components.warning_pagination.setContentType = function(content_type){
				this.data.current_section = content_type;
				this.data.offset = 0;
				this.carousel.getItems().removeClass('loaded').filter(':gt(0)').remove();
				this.carousel.seekTo(0,0);
			}
			
			if(!app.components.warning_pagination){
				return;
			}
			
			app.components.warning_pagination.carousel.getRoot().bind('onSeek', {app:app}, function(e,d){
				e.data.app.components.warning_pagination.data.current_page = e.data.app.components.warning_pagination.carousel.getItems().eq(e.data.app.components.warning_pagination.carousel.getIndex());
				if(!e.data.app.components.warning_pagination.data.current_page.hasClass('loaded')){
					e.data.app.components.warning_pagination.data.current_page.addClass('loaded');
					tc.jQ.ajax({
						type:"GET",
						url:"/admin/"+e.data.app.components.warning_pagination.data.current_section+"/getflagged",
						data:{
							n_messages: e.data.app.components.warning_pagination.data.n_to_fetch,
							offset: e.data.app.components.warning_pagination.data.offset
						},
						context:e.data.app,
						dataType:"text",
						success: function(data, ts, xhr) {
							var d, temptbody, tempitem;
							try {
								d = tc.jQ.parseJSON(data);
							} catch(e) {current_step
								tc.util.log("/admin/all/getflagged: json parsing error", "warn");
								return;
							}
							this.components.warning_pagination.data.current_page.children('ul').children().remove();
							if(!d.length && this.components.warning_pagination.data.offset > 0){
								this.components.warning_pagination.data.current_page.remove();
								return;
							} else if(!d.length){
								this.components.warning_pagination.data.current_page.children('ul').append('<li><p>No Flagged Content.</p></li>');
							}
							if(d.length == this.components.warning_pagination.data.n_to_fetch){
								this.components.warning_pagination.carousel.addItem('\
									<li class="flagged-content-carousel-item clearfix spinner-message">\
										<ul class="items warning-list-stack">\
											<li><p>Loading...</p></li>\
										</ul>\
									</li>');
							}
							for(i in d){
								tempitem = this.components.warning_pagination.data.temp_item_source.clone().removeClass('template-content');
								if(d[i].owner_first_name && d[i].owner_last_name){
									tempitem.find('span.name').text(d[i].owner_first_name + ' ' + d[i].owner_last_name);
								}
								tempitem.find('span.title').text(d[i].project_title);
								tempitem.find('span.time').text(d[i].item_created_datetime);
								tempitem.find('p.description').text(d[i].item_description);
								tempitem.find('a.control-ok').attr('href','#ok-'+this.components.warning_pagination.data.current_section+','+d[i].item_id);
								tempitem.find('a.control-delete').attr('href','#remove-'+this.components.warning_pagination.data.current_section+','+d[i].item_id);
								this.components.warning_pagination.data.offset++;
								this.components.warning_pagination.data.current_page.children('ul').append(tempitem);
							}
							this.components.warning_pagination.data.current_page.find('a.control-ok').bind('click', {app:this}, this.components.content_functions.mark_content_ok);
							this.components.warning_pagination.data.current_page.find('a.control-delete').bind('click', {app:this}, this.components.content_functions.delete_content);
						}
					});
				}
			});
			
			app.components.warning_pagination.carousel.begin();
		}
		
		tc.jQ('.adminbar li.content').addClass('active');
		
	});
</script>
{% endblock page_js %}